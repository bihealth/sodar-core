{% extends 'projectroles/base.html' %}

{% block title %}User Profile for {{ request.user.get_full_name }}{% endblock %}

{% block projectroles %}
<div class="row sodar-pr-content-title">
  <h2 class="sodar-pr-content-title">{{ request.user.get_full_name }}</h2>
  <div class="sodar-pr-content-title-secondary text-muted">
    User Profile
  </div>
</div>

<div class="container-fluid sodar-page-container">

  <div class="card" id="sodar-user-details-card">
    <div class="card-header">
      <h4><i class="fa fa-user-circle-o"></i> Details</h4>
    </div>
    <div class="card-body">
      <dl class="row">
        {% if request.user.get_full_name != request.user.username %}
          <dt class="col-md-2">Full Name</dt>
          <dd class="col-md-10">{{ request.user.get_full_name }}</dd>
        {% endif %}
        <dt class="col-md-2">Username</dt>
        <dd class="col-md-10">{{ request.user.username }}</dd>
        <dt class="col-md-2">Email</dt>
        <dd class="col-md-10"><a href="mailto:{{ request.user.email }}">{{ request.user.email }}</a></dd>
        <dt class="col-md-2">UUID</dt>
        <dd class="col-md-10"><code>{{ request.user.sodar_uuid }}</code></dd>
        <dt class="col-md-2">Date Joined</dt>
        <dd class="col-md-10">{{ request.user.date_joined | date:'Y-m-d H:i' }}</dd>
      </dl>
    </div>
  </div>

  <div class="card" id="sodar-user-details-card">
    <div class="card-header">
      <h4>
        <i class="fa fa-sliders"></i> Settings
        <a role="button" class="btn btn-primary pull-right" href="{% url 'userprofile:update-settings' %}">
          <i class="fa fa-edit"></i> Update
        </a>
      </h4>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col px-0">
          <dl class="row">
            {% for setting in user_settings %}
              <dt class="col-2 font-weight-bold">{{ setting.label }}</dt>
              <dd class="col-10">
                {% if not setting.value %}
                  <span class="font-italic">not set</span>
                {% else %}
                  {{ setting.value }}
                {% endif %}
                {% if setting.description %}
                  <br>
                  <small class="text-muted font-italic">{{ setting.description }}</small>
                {% endif %}
              </dd>
            {% empty %}
              <dd class="col-12 text-center text-muted font-italic">No user settings available.</dd>
            {% endfor %}
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock projectroles %}
